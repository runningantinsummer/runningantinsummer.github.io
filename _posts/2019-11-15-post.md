---
layout: post
tags:
  - IOC
  - ' DI'
  - ' 依赖注入'
title: DI-依赖注入
category: Blog
---
**对于有着较长生命周期的复杂软件，软件的可扩展性、可维护性就变得尤其重要，一个高内聚、低耦合的模块化软件架构是软件能否成功的关键。为了搭建高可扩展、可维护的软件架构，人们已经提出多种多样的设计模式、设计原则；本篇将对实际工程中发挥作用的依赖注入、IOC等相关概念进行总结、归纳，个人觉得依赖倒置、控制反转、依赖注入这些名词不好理解，希望通过此篇加深理解与后续回顾。**

### 一、依赖

依赖关系体现一个类使用另一个类的服务的关系，强调“使用”，而且依赖是一种单向的关系。比如：我使用电脑写博客，我就依赖于电脑，我使用电脑给我提供的写博客服务，电脑不依赖于我。

在UML中依赖关系用带箭头的虚线表示：

![dependency relationship](/images/blogs/dependency_relationship.png "dependency relationship")

代码：
```csharp
class Computer
    {
        public Computer(string id)
        {
            _id = id;
        }

        public void Write(string content)
        {
            Console.Write(content);
        }

        private string _id;
    }

 class Writer
    {
        public Writer(string name)
        {
            _name = name;
        }

        public void WriteBlog(string content)
        {
            var computer = new Computer("1");
            computer.Write(content);
        }

        private string _name;
    }

class Program
    {
        static void Main(string[] args)
        {
            var writer = new Writer("ant");
            writer.WriteBlog("hello dependency!");
            Console.ReadLine();
        }
    }
```

### 二、依赖存在的问题
软件的需求往往随着软件的发展会出现需求变更，这也是所有从事软件行业的人不得不面对的一个问题。如上场景，客户在用电脑写博客软件运行一段时间后，可能会提出软件改成手机写博客的需求。那么我们的设计就要做如下变更：

![](/images/blogs/di_1.png)



### 三、依赖倒置




### 四、控制反转





### 五、依赖注入





